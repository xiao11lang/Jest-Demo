### 定时器模拟

在测试中使用定时器不是一个好的选择，因为原生定时器函数依赖于实际的时间，若指定的时间间隔较长，将大大延缓测试的进度。jest实现了对原生定时器的模拟，使得控制时间成为可能。

#### jest.useFakeTimers 

调用此方法后将启用假的定时器，注意，这仅意味着可以断言定时器函数被调用时相关的参数，如调用的次数、被调用时传入的参数等，定时器的回调函数并未真正运行。

若在一个测试文件中运行了多个包含定时器函数的测试，则在每次测试前应该手动调用jest.useFakeTimers ()，或使用beforeEach方法。否则，内部使用的定时器信息不会重置，而是会叠加。这意味着你需要维护定时器被调用的次数等信息。

#### jest.runAllTimers

调用此方法时，定时器的回调函数才真正执行。

#### jest.runOnlyPendingTimers

若在定时器函数中递归调用定时器函数本身，则不应使用jest.runAllTimers ()，因为这会导致无限循环，使得测试不能正常进行。此时应该使用jest.runOnlyPendingTimers() 。jest将维护在递归函数调用前创建的定时器函数信息。